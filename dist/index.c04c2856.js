async function t(t){let e,s=await fetch(t);return s.ok?e=await s.json():alert("Http error: "+s.status),e}async function e(t){let e,s=await fetch(t);return s.ok?e=await s.json():alert("Http error: "+s.status),e}async function s(t,e,s,n,i){await fetch(t,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({pump_1:e,pump_2:s,fan:n,aux:i})})}async function n(t){let e,s=await fetch(t);return s.ok?e=await s.json():alert("Http error: "+s.status),e}function i(e,s){t("/devices").then(t=>{let n=t.device_1,i=t.device_2,a=t.device_3,o=t.device_4,c=1,d="",l="";for(let t of("monitoring"===s?(d="device__status-online",l="device__status-offline"):(d="device__settings__status-online",l="device__settings__status-offline"),[n,i,a,o])){let s=document.getElementById(e+"_status_"+c);s.classList.remove(),!0===t?(s.innerText="ON",s.dataset.isActive=!0,s.classList.add(d)):(s.innerText="OFF",s.dataset.isActive=!1,s.classList.add(l)),c+=1}})}function a(){n("/temperatures").then(t=>{let e=t.temperature_1,s=t.temperature_2;document.getElementById("temperature_1").innerText=`${e}\xb0`,document.getElementById("temperature_2").innerText=`${s}\xb0`}),i("monitor","monitoring")}async function o(){let t=await e("/settings"),s=[];for(let e in t)s.push(t[e]);for(let t=0;t<4;t++)document.getElementById("start_"+(t+1)).value=`${s[t].start}`,document.getElementById("stop_"+(t+1)).value=`${s[t].stop}`}async function c(){let t=[];for(let e=0;e<4;e++){let s=document.getElementById("start_"+(e+1)).value,n=document.getElementById("stop_"+(e+1)).value,i=document.getElementById("setting_status_"+(e+1)).dataset.isActive;if(s===n){let t=`Device ${e+1}: start == stop`;throw alert(t),Error(t)}t.push({start:Number(s),stop:Number(n),isActive:i})}await s("/settings",t[0],t[1],t[2],t[3])}function d(t){let e=document.getElementById(t);e.addEventListener("click",()=>{if("setting_status_1"===t||"setting_status_4"===t){let e=document.getElementById("setting_status_1"===t?"setting_status_4":"setting_status_1");"true"===e.dataset.isActive&&(e.innerText="OFF",e.classList.remove("device__settings__status-online"),e.classList.add("device__settings__status-offline"),e.dataset.isActive=!1)}"ON"===e.innerText?(e.innerText="OFF",e.classList.remove("device__settings__status-online"),e.classList.add("device__settings__status-offline"),e.dataset.isActive=!1):(e.innerText="ON",e.classList.remove("device__settings__status-offline"),e.classList.add("device__settings__status-online"),e.dataset.isActive=!0)})}document.addEventListener("DOMContentLoaded",function(){document.getElementById("monitoring").classList.add("active_settings_button"),document.querySelector(".settings").style.display="none";let t=setInterval(a,1e3);document.getElementById("monitoring").addEventListener("click",function(){document.getElementById("monitoring").classList.add("active_settings_button"),document.getElementById("settings").classList.remove("active_settings_button"),document.querySelector(".monitoring").style.display="flex",document.querySelector(".settings").style.display="none",clearInterval(t),t=setInterval(a,1e3)}),document.getElementById("settings").addEventListener("click",function(){document.getElementById("monitoring").classList.remove("active_settings_button"),document.getElementById("settings").classList.add("active_settings_button"),document.querySelector(".settings").style.display="flex",document.querySelector(".monitoring").style.display="none",o(),d("setting_status_1"),d("setting_status_2"),d("setting_status_3"),d("setting_status_4"),clearInterval(t),i("setting")}),document.getElementById("submmit_button").addEventListener("click",function(){c()})});